{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","../../tools/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"user-header card\">\r\n\t\t\t<view class=\"user-info flex-row\">\r\n\t\t\t\t<image :src=\"userInfo.avatar || '/static/default-avatar.png'\" class=\"user-avatar\"></image>\r\n\t\t\t\t<view class=\"user-meta\">\r\n\t\t\t\t\t<text class=\"user-nickname\">{{userInfo.nickname || '未设置昵称'}}</text>\r\n\t\t\t\t\t<text class=\"user-id\">ID: {{userInfo.id || ''}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"user-stats flex-row\">\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{userStats.blogCount || 0}}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">博客</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{userStats.likeCount || 0}}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">获赞</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{userStats.commentCount || 0}}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">评论</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"menu-list card\">\r\n\t\t\t<view class=\"menu-item flex-row space-between align-center\" @click=\"goToMyBlogs\">\r\n\t\t\t\t<view class=\"menu-left flex-row align-center\">\r\n\t\t\t\t\t<text class=\"iconfont icon-blog\"></text>\r\n\t\t\t\t\t<text class=\"menu-text\">我的博客</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"iconfont icon-right\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu-item flex-row space-between align-center\" @click=\"goToMyLikes\">\r\n\t\t\t\t<view class=\"menu-left flex-row align-center\">\r\n\t\t\t\t\t<text class=\"iconfont icon-like\"></text>\r\n\t\t\t\t\t<text class=\"menu-text\">我的点赞</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"iconfont icon-right\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu-item flex-row space-between align-center\" @click=\"goToMyComments\">\r\n\t\t\t\t<view class=\"menu-left flex-row align-center\">\r\n\t\t\t\t\t<text class=\"iconfont icon-comment\"></text>\r\n\t\t\t\t\t<text class=\"menu-text\">我的评论</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"iconfont icon-right\"></text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"menu-list card\">\r\n\t\t\t<view class=\"menu-item flex-row space-between align-center\" @click=\"goToSettings\">\r\n\t\t\t\t<view class=\"menu-left flex-row align-center\">\r\n\t\t\t\t\t<text class=\"iconfont icon-settings\"></text>\r\n\t\t\t\t\t<text class=\"menu-text\">账号设置</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"iconfont icon-right\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu-item flex-row space-between align-center\" @click=\"goToAbout\">\r\n\t\t\t\t<view class=\"menu-left flex-row align-center\">\r\n\t\t\t\t\t<text class=\"iconfont icon-about\"></text>\r\n\t\t\t\t\t<text class=\"menu-text\">关于我们</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"iconfont icon-right\"></text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"logout-btn-wrapper\">\r\n\t\t\t<button class=\"logout-btn\" @click=\"logout\">退出登录</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { userApi } from '@/api/index.js';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserInfo: null,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tuserStats: {\r\n\t\t\t\t\tblogCount: 0,\r\n\t\t\t\t\tlikeCount: 0,\r\n\t\t\t\t\tcommentCount: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getUserInfo();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取用户信息\r\n\t\t\tasync getUserInfo() {\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// 先从本地存储获取\r\n\t\t\t\tconst userInfo = uni.getStorageSync('user');\r\n\t\t\t\tif (userInfo) {\r\n\t\t\t\t\tthis.userInfo = userInfo;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 再从服务器获取最新数据\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await userApi.getUserInfo();\r\n\t\t\t\t\tthis.userInfo = res.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 更新本地存储\r\n\t\t\t\t\tuni.setStorageSync('user', res.data);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取用户信息失败:', error);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 跳转到我的博客\r\n\t\t\tgoToMyBlogs() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/my-blogs/my-blogs'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 跳转到我的点赞\r\n\t\t\tgoToMyLikes() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/my-likes/my-likes'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 跳转到我的评论\r\n\t\t\tgoToMyComments() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/my-comments/my-comments'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 跳转到账号设置\r\n\t\t\tgoToSettings() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/settings/settings'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 跳转到关于我们\r\n\t\t\tgoToAbout() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/about/about'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 退出登录\r\n\t\t\tlogout() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要退出登录吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// 清除本地存储的用户信息和token\r\n\t\t\t\t\t\t\tuni.removeStorageSync('token');\r\n\t\t\t\t\t\t\tuni.removeStorageSync('user');\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 跳转到登录页\r\n\t\t\t\t\t\t\tuni.reroute({\r\n\t\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\t\r\n\t.user-header {\r\n\t\tpadding: 40rpx 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.user-info {\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.user-avatar {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 30rpx;\r\n\t}\r\n\t\r\n\t.user-meta {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.user-nickname {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.user-id {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.user-stats {\r\n\t\tjustify-content: space-around;\r\n\t\tborder-top: 1px solid #eee;\r\n\t\tpadding-top: 30rpx;\r\n\t}\r\n\t\r\n\t.stat-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.stat-value {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\t\r\n\t.stat-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.menu-list {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.menu-item {\r\n\t\theight: 100rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tborder-bottom: 1px solid #f5f5f5;\r\n\t}\r\n\t\r\n\t.menu-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t.menu-left {\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\t\r\n\t.iconfont {\r\n\t\tfont-size: 40rpx;\r\n\t\tcolor: #007AFF;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t\r\n\t.icon-right {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #ccc;\r\n\t\tmargin-right: 0;\r\n\t}\r\n\t\r\n\t.menu-text {\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t.logout-btn-wrapper {\r\n\t\tpadding: 40rpx 30rpx;\r\n\t}\r\n\t\r\n\t.logout-btn {\r\n\t\twidth: 100%;\r\n\t\theight: 90rpx;\r\n\t\tline-height: 90rpx;\r\n\t\tbackground-color: #FF6B6B;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n</style> ","import MiniProgramPage from 'D:/Hbuilder项目/myblog/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userApi"],"mappings":";;;AA6EC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,MACV,WAAW;AAAA,MACX,WAAW;AAAA,QACV,WAAW;AAAA,QACX,WAAW;AAAA,QACX,cAAc;AAAA,MACf;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,cAAc;AACnB,WAAK,YAAY;AAGjB,YAAM,WAAWA,cAAAA,MAAI,eAAe,MAAM;AAC1C,UAAI,UAAU;AACb,aAAK,WAAW;AAAA,MACjB;AAGA,UAAI;AACH,cAAM,MAAM,MAAMC,kBAAQ;AAC1B,aAAK,WAAW,IAAI;AAGpBD,sBAAAA,MAAI,eAAe,QAAQ,IAAI,IAAI;AAAA,MAClC,SAAO,OAAO;AACfA,sBAAA,MAAA,MAAA,SAAA,oCAAc,aAAa,KAAK;AAAA,MACjC,UAAU;AACT,aAAK,YAAY;AAAA,MAClB;AAAA,IACA;AAAA;AAAA,IAGD,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,iBAAiB;AAChBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,eAAe;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,SAAS;AACRA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAEhBA,gCAAI,kBAAkB,OAAO;AAC7BA,gCAAI,kBAAkB,MAAM;AAG5BA,0BAAAA,MAAI,QAAQ;AAAA,cACX,KAAK;AAAA,YACN,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;AC3KD,GAAG,WAAW,eAAe;"}