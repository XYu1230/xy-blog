{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../tools/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <view class=\"logo-box\">\r\n      <image src=\"/static/logo.png\" mode=\"aspectFit\" class=\"logo\"></image>\r\n      <text class=\"title\">星雨博客系统</text>\r\n    </view>\r\n\r\n    <view class=\"form-box\">\r\n      <view class=\"form-item\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"formData.username\"\r\n          placeholder=\"请输入学号\"\r\n          class=\"input-box\"\r\n          confirm-type=\"next\"\r\n        />\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <input\r\n          type=\"password\"\r\n          v-model=\"formData.password\"\r\n          placeholder=\"请输入密码\"\r\n          class=\"input-box\"\r\n          confirm-type=\"done\"\r\n        />\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <button @click=\"handleLogin\" class=\"btn-primary login-btn\">登 录</button>\r\n      </view>\r\n      \r\n      <!-- 添加测试用户按钮 -->\r\n      <!-- <view class=\"form-item\">\r\n        <button @click=\"useTestAccount\" class=\"btn-test\">使用测试账号</button>\r\n      </view> -->\r\n\r\n      <view class=\"form-item register-link\">\r\n        <text>还没有账号？</text>\r\n        <text @click=\"goToRegister\" class=\"link\">立即注册</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { userApi } from \"@/api/index.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      formData: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 处理登录\r\n    async handleLogin() {\r\n      // 表单验证\r\n      if (!this.formData.username.trim()) {\r\n        uni.showToast({\r\n          title: \"请输入用户名\",\r\n          icon: \"none\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (!this.formData.password.trim()) {\r\n        uni.showToast({\r\n          title: \"请输入密码\",\r\n          icon: \"none\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await userApi.login(this.formData);\r\n\r\n        // 存储token和用户信息\r\n        uni.setStorageSync(\"token\", res.data.token);\r\n        uni.setStorageSync(\"user\", res.data.user);\r\n\r\n        uni.showToast({\r\n          title: \"登录成功\",\r\n          icon: \"success\",\r\n        });\r\n\r\n        // 跳转到首页\r\n        setTimeout(() => {\r\n          uni.switchTab({\r\n            url: \"/pages/index/index\",\r\n          });\r\n        }, 1500);\r\n      } catch (error) {\r\n        console.error(\"登录失败:\", error);\r\n      }\r\n    },\r\n\r\n    // 使用测试账号\r\n    // useTestAccount() {\r\n    //   this.formData.username = this.testAccount.username;\r\n    //   this.formData.password = this.testAccount.password;\r\n      \r\n    //   uni.showToast({\r\n    //     title: \"已填充测试账号\",\r\n    //     icon: \"none\",\r\n    //     duration: 1000\r\n    //   });\r\n      \r\n    //   // 自动登录\r\n    //   setTimeout(() => {\r\n    //     this.handleLogin();\r\n    //   }, 1000);\r\n    // },\r\n\r\n    // 跳转到注册页面\r\n    goToRegister() {\r\n      uni.navigateTo({\r\n        url: \"/pages/register/register\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.login-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 40rpx;\r\n  height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.logo-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 60rpx;\r\n  margin-bottom: 80rpx;\r\n}\r\n\r\n.logo {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.form-box {\r\n  background-color: #fff;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.input-box {\r\n  width: 100%;\r\n  height: 90rpx;\r\n  background-color: #ffffff;\r\n  border: 1px solid #dddddd;\r\n  border-radius: 10rpx;\r\n  padding: 0 20rpx;\r\n  box-sizing: border-box;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  height: 90rpx;\r\n  line-height: 90rpx;\r\n  font-size: 32rpx;\r\n  margin-top: 30rpx;\r\n}\r\n\r\n.btn-test {\r\n  width: 100%;\r\n  height: 90rpx;\r\n  line-height: 90rpx;\r\n  font-size: 32rpx;\r\n  background-color: #f0f0f0;\r\n  color: #666;\r\n  border: none;\r\n  border-radius: 10rpx;\r\n}\r\n\r\n.register-link {\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.link {\r\n  color: #007aff;\r\n  margin-left: 10rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Hbuilder项目/myblog/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userApi"],"mappings":";;;;AAgDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA;EAEJ;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,cAAc;AAElB,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAEA,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAEA,UAAI;AACF,cAAM,MAAM,MAAMC,UAAO,QAAC,MAAM,KAAK,QAAQ;AAG7CD,sBAAG,MAAC,eAAe,SAAS,IAAI,KAAK,KAAK;AAC1CA,sBAAG,MAAC,eAAe,QAAQ,IAAI,KAAK,IAAI;AAExCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAGD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACZ,KAAK;AAAA,UACP,CAAC;AAAA,QACF,GAAE,IAAI;AAAA,MACP,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,+BAAc,SAAS,KAAK;AAAA,MAC9B;AAAA,IACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAoBD,eAAe;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA,EACF;AACH;;;;;;;;;;;;;AC3HA,GAAG,WAAW,eAAe;"}