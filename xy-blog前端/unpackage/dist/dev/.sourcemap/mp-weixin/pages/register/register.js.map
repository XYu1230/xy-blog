{"version":3,"file":"register.js","sources":["pages/register/register.vue","../../tools/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"register-container\">\r\n\t\t<view class=\"logo-box\">\r\n\t\t\t<image src=\"/static/logo.png\" mode=\"aspectFit\" class=\"logo\"></image>\r\n\t\t\t<text class=\"title\">注册账号</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"form-box\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.username\" placeholder=\"请输入学号\" class=\"input-box\" confirm-type=\"next\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<input type=\"password\" v-model=\"formData.password\" placeholder=\"请输入密码\" class=\"input-box\" confirm-type=\"next\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<input type=\"password\" v-model=\"formData.confirmPassword\" placeholder=\"请确认密码\" class=\"input-box\" confirm-type=\"next\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.nickname\" placeholder=\"请输入昵称\" class=\"input-box\" confirm-type=\"done\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<button @click=\"handleRegister\" class=\"btn-primary register-btn\">注 册</button>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 测试用户快速注册 -->\r\n\t\t\t<!-- <view class=\"form-item\">\r\n\t\t\t\t<button @click=\"fillTestInfo\" class=\"btn-test\">填充测试信息</button>\r\n\t\t\t</view> -->\r\n\t\t\t\r\n\t\t\t<view class=\"form-item login-link\">\r\n\t\t\t\t<text>已有账号？</text>\r\n\t\t\t\t<text @click=\"goToLogin\" class=\"link\">去登录</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { userApi } from '@/api/index.js';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t\tconfirmPassword: '',\r\n\t\t\t\t\tnickname: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 测试用户信息\r\n\t\t\t\ttestInfo: {\r\n\t\t\t\t\tusername: 'testuser',\r\n\t\t\t\t\tpassword: '123456',\r\n\t\t\t\t\tnickname: '测试用户'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 处理注册\r\n\t\t\tasync handleRegister() {\r\n\t\t\t\t// 表单验证\r\n\t\t\t\tif (!this.formData.username.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入用户名',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.formData.password.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入密码',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.formData.password !== this.formData.confirmPassword) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '两次密码输入不一致',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.formData.nickname.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入昵称',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 构建注册参数\r\n\t\t\t\tconst registerData = {\r\n\t\t\t\t\tusername: this.formData.username,\r\n\t\t\t\t\tpassword: this.formData.password,\r\n\t\t\t\t\tnickname: this.formData.nickname\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await userApi.register(registerData);\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif(res.code === 500){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\t\ticon:'error'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '注册成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 注册成功后跳转到登录页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('注册失败:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 填充测试信息\r\n\t\t\t// fillTestInfo() {\r\n\t\t\t// \tthis.formData.username = this.testInfo.username;\r\n\t\t\t// \tthis.formData.password = this.testInfo.password;\r\n\t\t\t// \tthis.formData.confirmPassword = this.testInfo.password;\r\n\t\t\t// \tthis.formData.nickname = this.testInfo.nickname;\r\n\t\t\t\t\r\n\t\t\t// \tuni.showToast({\r\n\t\t\t// \t\ttitle: '已填充测试信息',\r\n\t\t\t// \t\ticon: 'none',\r\n\t\t\t// \t\tduration: 1000\r\n\t\t\t// \t});\r\n\t\t\t// },\r\n\t\t\t\r\n\t\t\t// 跳转到登录页面\r\n\t\t\tgoToLogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.register-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 40rpx;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t.logo-box {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 30rpx;\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.logo {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t}\r\n\t\r\n\t.title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\t\r\n\t.form-box {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 40rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.input-box {\r\n\t\twidth: 100%;\r\n\t\theight: 90rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder: 1px solid #dddddd;\r\n\t\tborder-radius: 10rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t.register-btn {\r\n\t\twidth: 100%;\r\n\t\theight: 90rpx;\r\n\t\tline-height: 90rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tmargin-top: 30rpx;\r\n\t}\r\n\t\r\n\t.btn-test {\r\n\t\twidth: 100%;\r\n\t\theight: 90rpx;\r\n\t\tline-height: 90rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tcolor: #666;\r\n\t\tborder: none;\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n\t\r\n\t.login-link {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.link {\r\n\t\tcolor: #007AFF;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n</style> ","import MiniProgramPage from 'D:/Hbuilder项目/myblog/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userApi"],"mappings":";;;;AA4CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,UAAU;AAAA,MACV;AAAA;AAAA,MAED,UAAU;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,iBAAiB;AAEtB,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,KAAK,SAAS,aAAa,KAAK,SAAS,iBAAiB;AAC7DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAGA,YAAM,eAAe;AAAA,QACpB,UAAU,KAAK,SAAS;AAAA,QACxB,UAAU,KAAK,SAAS;AAAA,QACxB,UAAU,KAAK,SAAS;AAAA;AAGzB,UAAI;AACH,cAAM,MAAM,MAAMC,UAAAA,QAAQ,SAAS,YAAY;AAC/CD,sBAAAA,MAAA,MAAA,OAAA,sCAAY,GAAG;AACf,YAAG,IAAI,SAAS,KAAI;AACnBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI;AAAA,YACX,MAAK;AAAA,UACN,CAAC;AAAA,eACG;AACJA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAGD,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,WAAW;AAAA,cACd,KAAK;AAAA,aACL;AAAA,UACD,GAAE,IAAI;AAAA,QACR;AAAA,MACC,SAAO,OAAO;AACfA,iFAAc,SAAS,KAAK;AAAA,MAC7B;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAiBD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;ACtJD,GAAG,WAAW,eAAe;"}